# r/Pikabu Feed Bot

**Disclaimer**

Да, я знаю, что код попахивает, что это делается не так, не тем и не на том.

### Что это?

* Прочитанное в реддит работает не так. Сторонние клиенты позволяют его скрывать, но взамен
ты получаешь квест с тем что бы его посмотреть вновь при необходимости. При этом у них не всегда есть нужный
объем функционала.
* С десктопной версией все получше, но кому нужны десктопы в 2к19.
* Хочется аналог "лучшего" с понятным разделением на новое / прочитанное.

Этот бот получает горячие посты с r/Pikabu, сверяется со списком и отправляет все новые
в каналы телеги [@rpikabufeed_nsfw (с клубничной)](https://t.me/rpikabufeed_nsfw) 
и [@rpikabufeed (без клубнички)](https://t.me/rpikabufeed)

На момент написания это 1-3 поста раз в пять минут, т.к. рекомендую отключить уведомления.

### Возникшие проблемы

* Я не знаю как правильно вставить в сообщение видео с YouTube, что бы его сразу можно было посмотреть.
* Видео с Reddit, а так же гифки показываются нормально, но подозреваю, что кроме этих источников есть и другие,
их нужно так же как-то обрабатывать. Осталось только найти полный список всех возможных вариантов.
* Слишком большие картинки TG не пропускает, их надо пережимать и отдавать напрямую. А это надо написать )
* Так же есть некоторые проблемы с форматированием лонгридов и пока не совсем понятно, как инлайнить картинки в тексте
сообщения
* Кривой код. см. disclaimer

### Использование

Форкнуть и запустить бота у себя, под свои хотелки, можен любой, кто знает как это делать. Особенно если он потом
сделат пулл-реквест со своими изменениями. 

### Скучное

```
* * * * * cd /path/to/project && ./cron 1>> /dev/null 2>&1
```

В .env нужно указать token бота и при необходимости - proxy url (см. доку к guzzlehttp)
